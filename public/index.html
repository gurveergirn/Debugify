<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Debugify</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Poppins", sans-serif;
        background-color: #ddb892;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
      }

      main {
        flex: 1;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 2rem 0;
      }

      footer {
        background-color: #734c3b;
        padding: 1.5rem;
        text-align: center;
        border-top: 1px solid #734c3b;
      }

      textarea::placeholder {
        color: #ffffff;
      }

      button:hover {
        background-color: #734c3b;
        color: #ffffff;
      }

      textarea,
      pre {
        overflow-y: auto;
        scrollbar-width: thin;
        scrollbar-color: #d6b28a #815d47;
      }

      textarea::-webkit-scrollbar,
      pre::-webkit-scrollbar {
        width: 8px;
      }

      textarea::-webkit-scrollbar-track,
      pre::-webkit-scrollbar-track {
        background: #815d47;
      }

      textarea::-webkit-scrollbar-thumb,
      pre::-webkit-scrollbar-thumb {
        background-color: #d6b28a;
        border-radius: 4px;
      }

      .hidden {
        display: none;
      }
    </style>
  </head>
  <body>
    <main>
      <div
        class="bg-[#b49073] shadow-lg rounded-lg p-8 w-full max-w-5xl border border-[#734c3b]"
      >
        <h1 class="text-5xl font-bold text-center text-[#d6b28a] mb-4">
          Debugify
        </h1>
        <p class="text-center text-[#ffffff] text-base">
          Optimize and debug your code effortlessly with AI-powered precision.
        </p>
        <p class="text-center text-[#ffffff] text-base mt-1">
          Currently Supports Java, Python, JavaScript, C, and C++.
        </p>

        <label
          for="codeInput"
          class="block text-[#d6b28a] font-semibold mb-3 mt-6 text-lg"
        >
          Enter your code
        </label>
        <textarea
          id="codeInput"
          class="w-full h-48 p-6 border border-[#734c3b] bg-[#815d47] text-[#e8d8c8] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#d6b28a] resize-none text-sm"
          placeholder="Paste your code here..."
        ></textarea>

        <label
          for="languageSelect"
          class="block text-[#d6b28a] font-semibold mb-3 mt-6 text-lg"
        >
          Select Language
        </label>
        <select
          id="languageSelect"
          class="w-full p-3 border border-[#734c3b] bg-[#815d47] text-[#e8d8c8] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#d6b28a] text-sm"
        >
          <option value="JavaScript">JavaScript</option>
          <option value="Python">Python</option>
          <option value="Java">Java</option>
          <option value="C">C</option>
          <option value="C++">C++</option>
        </select>

        <button
          id="submitBtn"
          class="mt-6 w-full bg-[#d6b28a] text-[#734c3b] py-3 rounded-lg shadow-md transform hover:scale-105 transition-all duration-300 text-base font-semibold flex items-center justify-center gap-2"
        >
          <span id="submitText">Optimize & Debug</span>
          <svg
            id="loadingSpinner"
            class="hidden animate-spin h-5 w-5 text-[#734c3b]"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
          >
            <circle
              class="opacity-25"
              cx="12"
              cy="12"
              r="10"
              stroke="currentColor"
              stroke-width="4"
            ></circle>
            <path
              class="opacity-75"
              fill="currentColor"
              d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"
            ></path>
          </svg>
        </button>

        <h2 class="mt-8 text-lg font-semibold text-[#d6b28a]">
          Optimized & Debugged Code
        </h2>
        <pre
          id="output"
          class="mt-3 bg-[#815d47] p-6 rounded-lg h-48 border border-[#734c3b] text-[#e8d8c8] text-sm"
        ></pre>

        <button
          id="copyBtn"
          class="mt-4 w-full bg-[#d6b28a] text-[#734c3b] py-2 rounded-lg shadow-md transform hover:scale-105 transition-all duration-300 flex items-center justify-center gap-3 text-sm font-semibold"
        >
          <span id="copyText">Copy to Clipboard</span>
          <svg
            id="checkMark"
            class="hidden w-5 h-5 text-[#734c3b]"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="2"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M5 13l4 4L19 7"
            />
          </svg>
        </button>

        <div class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-6 text-center">
          <div class="bg-[#815d47] p-4 rounded-lg border border-[#734c3b]">
            <h3 class="font-bold text-[#d6b28a] text-base mb-2">AI-Powered</h3>
            <p class="text-sm text-[#e8d8c8]">
              Utilize AI for precise code debugging and optimization.
            </p>
          </div>
          <div class="bg-[#815d47] p-4 rounded-lg border border-[#734c3b]">
            <h3 class="font-bold text-[#d6b28a] text-base mb-2">Easy Copy</h3>
            <p class="text-sm text-[#e8d8c8]">
              Quickly copy optimized code with a single click.
            </p>
          </div>
          <div class="bg-[#815d47] p-4 rounded-lg border border-[#734c3b]">
            <h3 class="font-bold text-[#d6b28a] text-base mb-2">
              Future Language Support
            </h3>
            <p class="text-sm text-[#e8d8c8]">
              Support for more languages coming soon!
            </p>
          </div>
        </div>
      </div>
    </main>

    <footer>
      <h2 class="text-sm font-semibold text-[#d6b28a]">Connect with Me</h2>
      <div class="mt-2 flex items-center justify-center space-x-6">
        <!-- GitHub -->
        <a
          href="https://github.com/gurveergirn"
          target="_blank"
          class="hover:text-[#d6b28a] transition-all duration-300"
        >
          <svg
            class="w-6 h-6"
            fill="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M12 .5C5.62.5.5 5.62.5 12c0 5.1 3.292 9.418 7.865 10.953.575.102.785-.243.785-.54v-1.88c-3.202.697-3.885-1.408-3.885-1.408-.522-1.342-1.275-1.7-1.275-1.7-1.042-.713.078-.698.078-.698 1.15.08 1.754 1.18 1.754 1.18 1.024 1.754 2.688 1.247 3.344.953.102-.74.404-1.248.73-1.536-2.56-.292-5.26-1.276-5.26-5.678 0-1.254.452-2.292 1.18-3.1-.116-.292-.51-1.472.112-3.072 0 0 .96-.308 3.15 1.18a10.9 10.9 0 015.73 0c2.19-1.488 3.15-1.18 3.15-1.18.62 1.6.228 2.78.114 3.072.73.808 1.18 1.846 1.18 3.1 0 4.414-2.704 5.382-5.276 5.67.416.362.788 1.084.788 2.186v3.234c0 .3.208.656.796.544C20.704 21.416 24 17.098 24 12c0-6.38-5.12-11.5-12-11.5z"
            />
          </svg>
        </a>
        <!-- LinkedIn -->
        <a
          href="https://www.linkedin.com/in/gurveer-girn-38a2b530a/"
          target="_blank"
          class="hover:text-[#d6b28a] transition-all duration-300"
        >
          <svg
            class="w-6 h-6"
            fill="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M22.23 0H1.77C.79 0 0 .77 0 1.73v20.54C0 23.23.77 24 1.77 24h20.46c.96 0 1.77-.77 1.77-1.73V1.73C24 .77 23.23 0 22.23 0zM7.06 20.45H3.56V9.04h3.5v11.41zm-1.75-13c-1.14 0-2.06-.92-2.06-2.06 0-1.14.92-2.06 2.06-2.06 1.14 0 2.06.92 2.06 2.06-.01 1.14-.92 2.06-2.06 2.06zm15.94 13h-3.5v-5.59c0-1.34-.03-3.07-1.87-3.07-1.87 0-2.15 1.46-2.15 2.97v5.69h-3.5V9.04h3.36v1.56h.05c.47-.89 1.61-1.83 3.31-1.83 3.54 0 4.2 2.33 4.2 5.36v6.32z"
            />
          </svg>
        </a>
      </div>
    </footer>

    <script>
      document
        .getElementById("submitBtn")
        .addEventListener("click", async () => {
          const codeInput = document.getElementById("codeInput").value;
          const language = document.getElementById("languageSelect").value;
          const submitText = document.getElementById("submitText");
          const loadingSpinner = document.getElementById("loadingSpinner");

          submitText.classList.add("hidden");
          loadingSpinner.classList.remove("hidden");

          try {
            const response = await fetch("/process-code", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ code: codeInput, language }),
            });

            if (!response.ok) throw new Error("Failed to process the code");

            const data = await response.json();
            document.getElementById("output").textContent = data.optimizedCode;
          } catch (error) {
            console.error(error);
            alert("An error occurred while processing the code.");
          } finally {
            submitText.classList.remove("hidden");
            loadingSpinner.classList.add("hidden");
          }
        });

      document.getElementById("copyBtn").addEventListener("click", () => {
        const output = document.getElementById("output").textContent;
        const copyText = document.getElementById("copyText");
        const checkMark = document.getElementById("checkMark");

        navigator.clipboard
          .writeText(output.trim())
          .then(() => {
            copyText.classList.add("hidden");
            checkMark.classList.remove("hidden");

            setTimeout(() => {
              copyText.classList.remove("hidden");
              checkMark.classList.add("hidden");
            }, 2000);
          })
          .catch((err) => {
            console.error("Failed to copy:", err);
          });
      });
    </script>
  </body>
</html>
